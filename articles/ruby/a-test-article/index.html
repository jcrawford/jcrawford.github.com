<!DOCTYPE html>
<!--[if !IE]><!--> <html lang="en-US"> <!--<![endif]-->
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Joseph Crawford | Ruby Articles | Blogging with Jekyll</title>
    <link rel="profile" href="http://gmpg.org/xfn/11" />
    
    <meta property="og:type" content="blog" />
    <meta property="og:title" content="Joseph Crawford" />
    <meta property="og:url" content="http://www.josephcrawford.com" />
    <meta property="og:site_name" content="Joseph Crawford" />
    
        <!--[if IE 6]> <meta http-equiv="refresh" content="1;url=/home/codeb2/public_html/jcrawford/wp-content/themes/radiostation/assets/styles/_ie/kill_ie6/ie6.html"><![endif]-->
    <!--[if IE 7]> <link rel="stylesheet" type="text/css" href="http://www.josephcrawford.com/wp-content/themes/radiostation/assets/styles/_ie/ie7.css"> <![endif]-->
    <!--[if IE 8]> <link rel="stylesheet" type="text/css" href="http://www.josephcrawford.com/wp-content/themes/radiostation/assets/styles/_ie/ie8.css"> <![endif]-->
    <!--[if IE 9]> <link rel="stylesheet" type="text/css" href="http://www.josephcrawford.com/wp-content/themes/radiostation/assets/styles/_ie/ie9.css"> <![endif]-->
    <!--[if lt IE 10]> <link rel="stylesheet" type="text/css" href="http://www.josephcrawford.com/wp-content/themes/radiostation/assets/styles/_ie/ie.css"> <![endif]-->

    <style type="text/css">
        .floatleft {
            float: left;
            margin: 0px 10px 10px 0px;
            border: 1px solid #000000;
            padding: 2px;
            display: inline;
        }

        .floatcenter {
            text-align: center;
            margin: 0px 10px 10px 0px;
            border: 1px solid #000000;
            padding: 2px;
        }

        .floatright {
            float: right;
            margin: 0px 0px 10px 10px;
            border: 1px solid #000000;
            padding: 2px;
            display: inline;
        }
    </style>

    <script type="text/javascript">
    /* <![CDATA[ */
        var imageResize = "wordpress",
            resizeDisabled = "",
            assetsUri = "/images/production",
            imageNonce = "7072fe5b36";
        document.write('<style type="text/css">.noscript{visibility: hidden;}</style>');
    /* ]]> */
    </script>
    


    <link rel='stylesheet' id='pygments-css'  href='/css/pygments.css' type='text/css' media='screen' /> 
    <link rel='stylesheet' id='miss_prettyphoto-css'  href='/css/prettyPhoto.css' type='text/css' media='screen' />
    <link rel='stylesheet' id='missfont1-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C700italic%2C800italic%2C400%2C800%2C700%2C600%2C300&#038;ver=1.0.8' type='text/css' media='screen' />
    <link rel='stylesheet' id='missfont2-css'  href='http://fonts.googleapis.com/css?family=Droid+Sans%3A400%2C700&#038;ver=1.0.8' type='text/css' media='screen' />
    <link rel='stylesheet' id='missfont3-css'  href='http://fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic%2C900%2C900italic&#038;ver=1.0.8' type='text/css' media='screen' />
    <link rel='stylesheet' id='missfont4-css'  href='http://fonts.googleapis.com/css?family=Monda' type='text/css' media='screen' />
    
    <link rel='stylesheet' id='missshortcodes-css'  href='/css/shortcodes.css' type='text/css' media='screen' />
	<link rel='stylesheet' id='misswidgets-css'  href='/css/widgets.css' type='text/css' media='screen' />
    <link rel='stylesheet' id='missgeneral-css'  href='/css/style.css' type='text/css' media='screen' />
    <link rel='stylesheet' id='missresponsive-css'  href='/css/responsive.css' type='text/css' media='screen' />
    <link rel='stylesheet' id='missscore-css'  href='/css/score.css' type='text/css' media='screen' /> 
    <link rel='stylesheet' id='dropkick-css'  href='/css/jquery.selectbox.css' type='text/css' media='screen' />
    
    <link rel='stylesheet' id='light_lightblue-css'  href='/css/themes/light_lightblue.css' type='text/css' media='screen' title="light_lightblue" />
    <link rel='alternate stylesheet' id='gravity-css'  href='/css/themes/gravity.css' type='text/css' media='screen' title="gravity" />	
    <link rel='alternate stylesheet' id='dark_blue-css'  href='/css/themes/dark_blue.css' type='text/css' media='screen' title="dark_blue" />
    <link rel='alternate stylesheet' id='dark_coral-css'  href='/css/themes/dark_coral.css' type='text/css' media='screen' title="dark_coral" />
    <link rel='alternate stylesheet' id='dark_glance-css'  href='/css/themes/dark_glance.css' type='text/css' media='screen' title="dark_glance" />
    <link rel='alternate stylesheet' id='dark_crimson-css'  href='/css/themes/dark_crimson.css' type='text/css' media='screen' title="dark_crimson" />
    <link rel='alternate stylesheet' id='dark_glance-css'  href='/css/themes/dark_glance.css' type='text/css' media='screen' title="dark_glance" />
    <link rel='alternate stylesheet' id='dark_green-css'  href='/css/themes/dark_green.css' type='text/css' media='screen' title="dark_green" />
    <link rel='alternate stylesheet' id='dark_hotpink-css'  href='/css/themes/dark_hotpink.css' type='text/css' media='screen' title="dark_hotpink" />

    <link rel='stylesheet' id='override-css'  href='/css/override.css' type='text/css' media='screen' /> 
    <style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
        <script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type='text/javascript' src="/js/style-switcher.js"></script>
	<script type='text/javascript' src="/js/jquery.selectbox-0.2.min.js"></script>
    <script type='text/javascript' src='/js/jquery.prettyPhoto.js'></script>
    <script type='text/javascript' src='/js/tabs.min.js'></script>
    <script type='text/javascript' src='/js/jquery.flexslider-min.js'></script>
    <script type='text/javascript' src='/js/custom.js'></script>
    <script type='text/javascript' src='/js/stemmer.js'></script>
    <script type='text/javascript' src='/js/site-search.js'></script>

    <meta name="generator" content="Jekyll 0.11.2" />
    <link rel='shortlink' href='http://wp.me/sEFF' />

    <!-- Jetpack Open Graph Tags -->

    <script type="text/javascript">
		$(document).ready(function() {
			var cookie = readCookie("style");
			var title = cookie ? cookie : getPreferredStyleSheet();
			setActiveStyleSheet(title);
			
			$("#switcher").selectbox({
				onChange: function (val, inst) {
					setActiveStyleSheet(val);
				},
			});
			
		});
	
        // var _gaq = _gaq || [];
        // _gaq.push(['_setAccount', 'UA-18267810-1']);
        // _gaq.push(['_trackPageview']);
        (function() {
           // var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
           // ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
           // var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
		

    </script>
    

</head>

<body class="has_slider slider_nav_ flexslider has_header_social has_header_text is_home right_sidebar">
    <div class="background">
        <div class="background_inner"></div>
    </div>

    <div id="page_inner">
        <div class="top-pattern"></div>
        <div class="container">
            <div class="sixteen columns">
                <div id="header_extras">
                    <div class="header_social">
                        <div class="social_icon default">
                            <a href="http://twitter.com/josephcrawford"><img src="http://www.josephcrawford.com/wp-content/themes/radiostation/assets/images/sociables/default/twitter.png" alt="" /></a>
                        </div>
                        <div class="social_icon default">
                            <a href="https://www.facebook.com/joseph.crawford.16">
                                <img src="http://www.josephcrawford.com/wp-content/themes/radiostation/assets/images/sociables/default/facebook.png" alt="" />
                            </a>
                        </div>
                    </div>
                    <div class="header_text">I also waste time on the following social networks:</div>
                    <div class="clearboth"></div>
                </div><!-- #header_extras -->
            </div>
            <div id="header">
                <div class="sixteen columns">
                    <div class="logo">
                        <a rel="home" href="http://www.josephcrawford.com/" class="site_title">
                            <span>Joseph</span><span>Crawford</span>
                        </a>
                    </div><!-- .logo -->
                    <div id="header_ad">
                    <script type="text/javascript">
                        <!--
                            google_ad_client = "ca-pub-4815878521361271";
                            /* header right */
                            google_ad_slot = "4528456168";
                            google_ad_width = 234;
                            google_ad_height = 60;
                        //-->
                    </script>

                    <!-- ><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script> -->
                </div>
            </div>
        </div><!-- #header -->
        
                <div id="main_menu" class="sixteen columns row">
            <div class="main_navigation">
                <ul id="menu-menu" class="">
                    <li id="menu-item-1135" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home">
                        <a href="/"><span>Home</span></a>
                    </li>
                    <li id="menu-item-2069" class="menu-item menu-item-type-custom menu-item-object-custom menu_arrow">
                        <a href="#"><span>Articles</span></a>
                        <ul class="sub-menu">
                            <li id="menu-item-2070" class="menu-item menu-item-type-custom menu-item-object-custom menu_arrow"><a href="/articles/javascript/">JavaScript</a><ul class="sub-menu"><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="/articles/javascript/a-test-article/">A Test Article</a></li></ul><li id="menu-item-2070" class="menu-item menu-item-type-custom menu-item-object-custom menu_arrow"><a href="/articles/php/">PHP</a><ul class="sub-menu"><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="/articles/php/an-offensive-word-filter/">An Offensive Word Filter</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="/articles/php/going-deep-inside-php-sessions/">Going Deep Inside PHP Sessions</a></li></ul><li id="menu-item-2070" class="menu-item menu-item-type-custom menu-item-object-custom menu_arrow"><a href="/articles/ruby/">Ruby</a><ul class="sub-menu"><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="/articles/ruby/a-test-article/">Blogging with Jekyll</a></li></ul></li>
                        </ul>
                    </li>
                    <li id="menu-item-1134" class="menu-item menu-item-type-post_type menu-item-object-page">
                        <a href="/about/"><span>About</span></a>
                    </li>
                    <li id="menu-item-2021" class="menu-item menu-item-type-custom menu-item-object-custom menu_arrow">
                        <a href="#"><span>Resume</span></a>
                        <ul class="sub-menu">
                            <li id="menu-item-2022" class="menu-item menu-item-type-custom menu-item-object-custom">
                                <a href="/resume/resume.pdf">PDF</a>
                            </li>
                            <li id="menu-item-2023" class="menu-item menu-item-type-custom menu-item-object-custom">
                                <a href="/resume/resume.doc">Word</a>
                            </li>
                        </ul>
                    </li>
                    <li id="menu-item-2014" class="menu-item menu-item-type-post_type menu-item-object-page">
                        <a href="/contact/"><span>Contact Me</span></a>
                    </li>
                </ul>
            </div>
            <div class="clearboth"></div>
        </div><!-- #main_menu -->
        
        <div id="content">
            <div id="content_inner">
                <div id="main" class="ten columns clearfix">
                    <div id="main_inner">
                        <p>Over the last 6 years I have been using Wordpress as the engine behind this site.  Over that time I have gotten extremely irritated by the security issues in Wordpress and looked around for alternatives.  I was not able to find any alternative that really struck me as something I would throw Wordpress away for.</p>

<p>That is until I started learning more and more about GIT and Github.  When I started working with Github for contributing to OSS projects I found that you could run a blog by using Github pages.  Everything I read stated that it was very limited in the capabilities.  I read up on it for a while and found that Github supports Jekyll which is a static site generator.  You might be thinking to yourself (or screaming) why would anyone want to go back to the days of a static site?</p>

<p>Well you see for a blog you really don&#39;t need much else.</p>
<div class="highlight"><pre><code class="ruby"><span class="k">module</span> <span class="nn">Jekyll</span>

    <span class="k">class</span> <span class="nc">Site</span>
      <span class="kp">attr_accessor</span> <span class="ss">:reviews</span><span class="p">,</span> <span class="ss">:articles</span><span class="p">,</span> <span class="ss">:article_menu</span>

      <span class="n">alias_method</span> <span class="ss">:site_original_reset</span><span class="p">,</span> <span class="ss">:reset</span>
      <span class="k">def</span> <span class="nf">reset</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span>           <span class="o">=</span> <span class="o">[]</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">articles</span>          <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span>      <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">site_original_reset</span>
      <span class="k">end</span>

      <span class="c1"># Recursively traverse directories to find posts, pages and static files</span>
      <span class="c1"># that will become part of the site according to the rules in</span>
      <span class="c1"># filter_entries.</span>
      <span class="c1">#</span>
      <span class="c1"># dir - The String relative path of the directory to read. Default: &#39;&#39;.</span>
      <span class="c1">#</span>
      <span class="c1"># Returns nothing.</span>
      <span class="k">def</span> <span class="nf">read_directories</span><span class="p">(</span><span class="n">dir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">base</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">dir</span><span class="p">)</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="no">Dir</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="p">{</span> <span class="n">filter_entries</span><span class="p">(</span><span class="no">Dir</span><span class="o">.</span><span class="n">entries</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span> <span class="p">}</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">read_articles</span><span class="p">(</span><span class="n">dir</span><span class="p">)</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">read_posts</span><span class="p">(</span><span class="n">dir</span><span class="p">)</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">read_reviews</span><span class="p">(</span><span class="n">dir</span><span class="p">)</span>

        <span class="n">entries</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
          <span class="n">f_abs</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
          <span class="n">f_rel</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
          <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">directory?</span><span class="p">(</span><span class="n">f_abs</span><span class="p">)</span>
            <span class="k">next</span> <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sr">/\/$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">f_abs</span>
            <span class="n">read_directories</span><span class="p">(</span><span class="n">f_rel</span><span class="p">)</span>
          <span class="k">elsif</span> <span class="o">!</span><span class="no">File</span><span class="o">.</span><span class="n">symlink?</span><span class="p">(</span><span class="n">f_abs</span><span class="p">)</span>
            <span class="n">first3</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">f_abs</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">fd</span><span class="o">|</span> <span class="n">fd</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="p">}</span>
            <span class="k">if</span> <span class="n">first3</span> <span class="o">==</span> <span class="s2">&quot;---&quot;</span>
              <span class="c1"># file appears to have a YAML header so process it as a page</span>
              <span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="no">Page</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
            <span class="k">else</span>
              <span class="c1"># otherwise treat it as a static file</span>
              <span class="n">static_files</span> <span class="o">&lt;&lt;</span> <span class="no">StaticFile</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
        <span class="k">end</span>
      <span class="k">end</span>

      <span class="c1"># Read all the files in &lt;source&gt;/&lt;dir&gt;/_reviews and create a new Review</span>
      <span class="c1"># object with each one.</span>
      <span class="c1">#</span>
      <span class="c1"># dir - The String relative path of the directory to read.</span>
      <span class="c1">#</span>
      <span class="c1"># Returns nothing.</span>
      <span class="k">def</span> <span class="nf">read_reviews</span><span class="p">(</span><span class="n">dir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">base</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="s1">&#39;_reviews&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">unless</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="no">Dir</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="p">{</span> <span class="n">filter_entries</span><span class="p">(</span><span class="no">Dir</span><span class="o">[</span><span class="s1">&#39;**/*&#39;</span><span class="o">]</span><span class="p">)</span> <span class="p">}</span>

        <span class="c1"># first pass processes, but does not yet render post content</span>
        <span class="n">entries</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
          <span class="k">if</span> <span class="no">Review</span><span class="o">.</span><span class="n">valid?</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

            <span class="n">review</span> <span class="o">=</span> <span class="no">Review</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">review</span><span class="o">.</span><span class="n">published</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">future</span> <span class="o">||</span> <span class="n">review</span><span class="o">.</span><span class="n">date</span> <span class="o">&lt;=</span> <span class="nb">self</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
              <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span> <span class="o">&lt;&lt;</span> <span class="n">review</span>
              <span class="n">review</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="nb">self</span><span class="o">.</span><span class="n">categories</span><span class="o">[</span><span class="n">c</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">review</span> <span class="p">}</span>
              <span class="n">review</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="nb">self</span><span class="o">.</span><span class="n">tags</span><span class="o">[</span><span class="n">c</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">review</span> <span class="p">}</span>
            <span class="k">end</span>
          <span class="k">end</span>
        <span class="k">end</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span><span class="o">.</span><span class="n">sort!</span>

        <span class="c1"># limit the reviews if :limit_reviews option is set</span>
        <span class="k">if</span> <span class="vi">@limit_reviews</span>
          <span class="n">limit</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;</span> <span class="vi">@limit_reviews</span> <span class="p">?</span> <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span><span class="o">.</span><span class="n">length</span> <span class="p">:</span> <span class="vi">@limit_reviews</span>
          <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span><span class="o">[-</span><span class="n">limit</span><span class="p">,</span> <span class="n">limit</span><span class="o">]</span>
        <span class="k">end</span>
      <span class="k">end</span>

      <span class="c1"># Read all the files in &lt;source&gt;/&lt;dir&gt;/_reviews and create a new Review</span>
      <span class="c1"># object with each one.</span>
      <span class="c1">#</span>
      <span class="c1"># dir - The String relative path of the directory to read.</span>
      <span class="c1">#</span>
      <span class="c1"># Returns nothing.</span>
      <span class="k">def</span> <span class="nf">read_articles</span><span class="p">(</span><span class="n">dir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">base</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="s1">&#39;_articles&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">unless</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>

        <span class="n">dirs</span> <span class="o">=</span> <span class="no">Dir</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="p">{</span> <span class="no">Dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*/&quot;</span><span class="p">)</span> <span class="p">}</span>

        <span class="n">dirs</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">type_dir</span><span class="o">|</span> 
          <span class="n">type</span> <span class="o">=</span> <span class="n">type_dir</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

          <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">[</span><span class="n">type</span><span class="o">]</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>

          <span class="n">entries</span> <span class="o">=</span> <span class="no">Dir</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">type_dir</span><span class="p">)</span> <span class="p">{</span> <span class="n">filter_entries</span><span class="p">(</span><span class="no">Dir</span><span class="o">[</span><span class="s1">&#39;**/*&#39;</span><span class="o">]</span><span class="p">)</span> <span class="p">}</span>

          <span class="k">if</span> <span class="n">entries</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="c1"># Add the type to the navigation menu</span>
            <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span> <span class="o">+=</span> <span class="s1">&#39;&lt;li id=&quot;menu-item-2070&quot; class=&quot;menu-item menu-item-type-custom menu-item-object-custom menu_arrow&quot;&gt;&#39;</span>
            <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span> <span class="o">+=</span> <span class="s1">&#39;&lt;a href=&quot;/articles/&#39;</span> <span class="o">+</span> <span class="n">type</span><span class="o">.</span><span class="n">downcase</span> <span class="o">+</span> <span class="s1">&#39;/&quot;&gt;&#39;</span> <span class="o">+</span> <span class="n">type</span> <span class="o">+</span> <span class="s1">&#39;&lt;/a&gt;&#39;</span>
            <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span> <span class="o">+=</span> <span class="s1">&#39;&lt;ul class=&quot;sub-menu&quot;&gt;&#39;</span>
          <span class="k">end</span>

          <span class="c1"># first pass processes, but does not yet render post content</span>
          <span class="n">entries</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>

            <span class="k">if</span> <span class="no">Article</span><span class="o">.</span><span class="n">valid?</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

              <span class="n">article</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">type</span><span class="p">)</span>

              <span class="k">if</span> <span class="n">article</span><span class="o">.</span><span class="n">published</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">future</span> <span class="o">||</span> <span class="n">article</span><span class="o">.</span><span class="n">date</span> <span class="o">&lt;=</span> <span class="nb">self</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
                <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span> <span class="o">+=</span> <span class="s1">&#39;&lt;li class=&quot;menu-item menu-item-type-custom menu-item-object-custom&quot;&gt;&#39;</span>
                <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span> <span class="o">+=</span> <span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="n">article</span><span class="o">.</span><span class="n">url</span> <span class="o">+</span> <span class="s1">&#39;/&quot;&gt;&#39;</span> <span class="o">+</span> <span class="n">article</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s2">&quot;title&quot;</span><span class="o">]</span> <span class="o">+</span> <span class="s1">&#39;&lt;/a&gt;&#39;</span>
                <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/li&gt;&#39;</span>

                <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">[</span><span class="n">type</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">article</span>
                <span class="n">article</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="nb">self</span><span class="o">.</span><span class="n">categories</span><span class="o">[</span><span class="n">c</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">article</span> <span class="p">}</span>
                <span class="n">article</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="nb">self</span><span class="o">.</span><span class="n">tags</span><span class="o">[</span><span class="n">c</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">article</span> <span class="p">}</span>
              <span class="k">end</span>
            <span class="k">end</span>
          <span class="k">end</span>

          <span class="k">if</span> <span class="n">entries</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/ul&gt;&#39;</span>
          <span class="k">end</span>

          <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">[</span><span class="n">type</span><span class="o">].</span><span class="n">sort!</span>

        <span class="k">end</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/li&gt;&#39;</span>

          <span class="k">if</span> <span class="vi">@limit_articles</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">[</span><span class="n">type</span><span class="o">].</span><span class="n">length</span> <span class="o">&lt;</span> <span class="vi">@limit_articles</span> <span class="p">?</span> <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">[</span><span class="n">type</span><span class="o">].</span><span class="n">length</span> <span class="p">:</span> <span class="vi">@limit_articles</span>
            <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">[</span><span class="n">type</span><span class="o">]</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">[</span><span class="n">type</span><span class="o">][-</span><span class="n">limit</span><span class="p">,</span> <span class="n">limit</span><span class="o">]</span>
          <span class="k">end</span> 
      <span class="k">end</span>

      <span class="c1"># Render the site to the destination.</span>
      <span class="c1">#</span>
      <span class="c1"># Returns nothing.</span>
      <span class="k">def</span> <span class="nf">render</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">site_payload</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">type</span><span class="p">,</span> <span class="n">articles</span><span class="o">|</span>
          <span class="n">articles</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span>
            <span class="n">article</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
          <span class="k">end</span>
        <span class="k">end</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">review</span><span class="o">|</span>
          <span class="n">review</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
        <span class="k">end</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">posts</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span>
          <span class="n">post</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
        <span class="k">end</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">page</span><span class="o">|</span>
          <span class="n">page</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
        <span class="k">end</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">ps</span><span class="o">|</span> <span class="n">ps</span><span class="o">.</span><span class="n">sort!</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span> <span class="n">b</span> <span class="o">&lt;=&gt;</span> <span class="n">a</span> <span class="p">}</span> <span class="p">}</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">ps</span><span class="o">|</span> <span class="n">ps</span><span class="o">.</span><span class="n">sort!</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span> <span class="n">b</span> <span class="o">&lt;=&gt;</span> <span class="n">a</span> <span class="p">}</span> <span class="p">}</span>
      <span class="k">rescue</span> <span class="no">Errno</span><span class="o">::</span><span class="no">ENOENT</span> <span class="o">=&gt;</span> <span class="n">e</span>
        <span class="c1"># ignore missing layout dir</span>
      <span class="k">end</span>

      <span class="c1"># Remove orphaned files and empty directories in destination.</span>
      <span class="c1">#</span>
      <span class="c1"># Returns nothing.</span>
      <span class="k">def</span> <span class="nf">cleanup</span>
        <span class="c1"># all files and directories in destination, including hidden ones</span>
        <span class="n">dest_files</span> <span class="o">=</span> <span class="no">Set</span><span class="o">.</span><span class="n">new</span>
        <span class="no">Dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="s2">&quot;**&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">),</span> <span class="no">File</span><span class="o">::</span><span class="no">FNM_DOTMATCH</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
          <span class="n">dest_files</span> <span class="o">&lt;&lt;</span> <span class="n">file</span> <span class="k">unless</span> <span class="n">file</span> <span class="o">=~</span> <span class="sr">/\/\.{1,2}$/</span>
        <span class="k">end</span>

        <span class="c1"># files to be written</span>
        <span class="n">files</span> <span class="o">=</span> <span class="no">Set</span><span class="o">.</span><span class="n">new</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">type</span><span class="p">,</span> <span class="n">articles</span><span class="o">|</span>
          <span class="n">articles</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span>
            <span class="n">files</span> <span class="o">&lt;&lt;</span> <span class="n">article</span><span class="o">.</span><span class="n">destination</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
          <span class="k">end</span>
        <span class="k">end</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">review</span><span class="o">|</span>
          <span class="n">files</span> <span class="o">&lt;&lt;</span> <span class="n">review</span><span class="o">.</span><span class="n">destination</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
        <span class="k">end</span>

        <span class="nb">self</span><span class="o">.</span><span class="n">posts</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span>
          <span class="n">files</span> <span class="o">&lt;&lt;</span> <span class="n">post</span><span class="o">.</span><span class="n">destination</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
        <span class="k">end</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">page</span><span class="o">|</span>
          <span class="n">files</span> <span class="o">&lt;&lt;</span> <span class="n">page</span><span class="o">.</span><span class="n">destination</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
        <span class="k">end</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">static_files</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">sf</span><span class="o">|</span>
          <span class="n">files</span> <span class="o">&lt;&lt;</span> <span class="n">sf</span><span class="o">.</span><span class="n">destination</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
        <span class="k">end</span>

        <span class="c1"># adding files&#39; parent directories</span>
        <span class="n">dirs</span> <span class="o">=</span> <span class="no">Set</span><span class="o">.</span><span class="n">new</span>
        <span class="n">files</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span> <span class="n">dirs</span> <span class="o">&lt;&lt;</span> <span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="p">}</span>
        <span class="n">files</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">dirs</span><span class="p">)</span>

        <span class="n">obsolete_files</span> <span class="o">=</span> <span class="n">dest_files</span> <span class="o">-</span> <span class="n">files</span>

        <span class="no">FileUtils</span><span class="o">.</span><span class="n">rm_rf</span><span class="p">(</span><span class="n">obsolete_files</span><span class="o">.</span><span class="n">to_a</span><span class="p">)</span>
      <span class="k">end</span>

      <span class="c1"># Write static files, pages, and posts.</span>
      <span class="c1">#</span>
      <span class="c1"># Returns nothing.</span>
      <span class="n">alias_method</span> <span class="ss">:site_original_write</span><span class="p">,</span> <span class="ss">:write</span>
      <span class="k">def</span> <span class="nf">write</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">type</span><span class="p">,</span> <span class="n">articles</span><span class="o">|</span>
          <span class="n">articles</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span>
            <span class="n">article</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
          <span class="k">end</span>
        <span class="k">end</span>

        <span class="n">site_original_write</span>
      <span class="k">end</span>


      <span class="c1"># Construct a Hash of Posts indexed by the specified Post attribute.</span>
      <span class="c1">#</span>
      <span class="c1"># post_attr - The String name of the Post attribute.</span>
      <span class="c1">#</span>
      <span class="c1"># Examples</span>
      <span class="c1">#</span>
      <span class="c1">#   post_attr_hash(&#39;categories&#39;)</span>
      <span class="c1">#   # =&gt; { &#39;tech&#39; =&gt; [&lt;Post A&gt;, &lt;Post B&gt;],</span>
      <span class="c1">#   #      &#39;ruby&#39; =&gt; [&lt;Post B&gt;] }</span>
      <span class="c1">#</span>
      <span class="c1"># Returns the Hash: { attr =&gt; posts } where</span>
      <span class="c1">#   attr  - One of the values for the requested attribute.</span>
      <span class="c1">#   posts - The Array of Posts with the given attr value.</span>
      <span class="k">def</span> <span class="nf">post_attr_hash</span><span class="p">(</span><span class="n">post_attr</span><span class="p">)</span>
        <span class="c1"># Build a hash map based on the specified post attribute ( post attr =&gt;</span>
        <span class="c1"># array of posts ) then sort each array in reverse order.</span>
        <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span> <span class="o">|</span><span class="n">hsh</span><span class="p">,</span> <span class="n">key</span><span class="o">|</span> <span class="n">hsh</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span> <span class="p">}</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">posts</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="nb">p</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">post_attr</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="nb">hash</span><span class="o">[</span><span class="n">t</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="nb">p</span> <span class="p">}</span> <span class="p">}</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="nb">p</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">post_attr</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="nb">hash</span><span class="o">[</span><span class="n">t</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="nb">p</span> <span class="p">}</span> <span class="p">}</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">type</span><span class="p">,</span> <span class="n">articles</span><span class="o">|</span> <span class="n">articles</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="nb">p</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">post_attr</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="nb">hash</span><span class="o">[</span><span class="n">t</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="nb">p</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
        <span class="nb">hash</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">sortme</span><span class="o">|</span> <span class="n">sortme</span><span class="o">.</span><span class="n">sort!</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span> <span class="n">b</span> <span class="o">&lt;=&gt;</span> <span class="n">a</span> <span class="p">}</span> <span class="p">}</span>
        <span class="nb">hash</span>
      <span class="k">end</span>

      <span class="c1"># The Hash payload containing site-wide data.</span>
      <span class="n">alias_method</span> <span class="ss">:site_original_site_payload</span><span class="p">,</span> <span class="ss">:site_payload</span>
      <span class="k">def</span> <span class="nf">site_payload</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">site_original_site_payload</span>

        <span class="n">payload</span><span class="o">[</span><span class="s2">&quot;site&quot;</span><span class="o">][</span><span class="s2">&quot;article_menu&quot;</span><span class="o">]</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">article_menu</span>

        <span class="n">payload</span><span class="o">[</span><span class="s2">&quot;site&quot;</span><span class="o">][</span><span class="s2">&quot;reviews&quot;</span><span class="o">]</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">reviews</span><span class="o">.</span><span class="n">sort</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span> <span class="n">b</span> <span class="o">&lt;=&gt;</span> <span class="n">a</span><span class="p">}</span>

        <span class="n">payload</span><span class="o">[</span><span class="s2">&quot;site&quot;</span><span class="o">][</span><span class="s2">&quot;articles&quot;</span><span class="o">]</span> <span class="o">=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span>        
        <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">type</span><span class="p">,</span> <span class="n">article</span><span class="o">|</span>
          <span class="k">if</span> <span class="n">payload</span><span class="o">[</span><span class="s2">&quot;site&quot;</span><span class="o">][</span><span class="s2">&quot;articles&quot;</span><span class="o">].</span><span class="n">kind_of?</span><span class="p">(</span><span class="nb">Array</span><span class="p">)</span> <span class="o">==</span> <span class="kp">false</span>
            <span class="n">payload</span><span class="o">[</span><span class="s2">&quot;site&quot;</span><span class="o">][</span><span class="s2">&quot;articles&quot;</span><span class="o">][</span><span class="n">type</span><span class="o">]</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>
          <span class="k">end</span>
          <span class="n">payload</span><span class="o">[</span><span class="s2">&quot;site&quot;</span><span class="o">][</span><span class="s2">&quot;articles&quot;</span><span class="o">][</span><span class="n">type</span><span class="o">]</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">articles</span><span class="o">[</span><span class="n">type</span><span class="o">].</span><span class="n">sort</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span> <span class="n">b</span> <span class="o">&lt;=&gt;</span> <span class="n">a</span><span class="p">}</span>
        <span class="k">end</span>

        <span class="n">payload</span>
      <span class="k">end</span>

    <span class="k">end</span>

<span class="k">end</span>
</code></pre>
</div>

                        <div class="clearboth"></div>
                    </div><!-- #main_inner -->
                </div><!-- #main -->

                                <div id="sidebar" class="six columns">
                    <div id="sidebar_inner">
                        <div id="search-3" class="widget widget_search">
                            <form id="searchform">
                                <input type="text" name="s" id="s" value="Enter Your Search Term" onfocus="if(this.value=='Enter Your Search Term')this.value='';" onblur="if(this.value=='')this.value='Enter Your Search Term';">
                            </form>
                        </div>
						<div id="themes">
							<div id="style-switcher">
								<span style="font-size: 16px;">Select Theme: </span>
								<select name="switcher" id="switcher" style="pretty dk">
									<option value='light_lightblue'>Default</option>
									<option value='gravity'>Gravity</option>
									<option value='dark_blue'>Dark Blue</option>
									<option value='dark_coral'>Dark Coral</option>
									<option value='dark_crimson'>Dark Crimson</option>
									<option value='dark_glance'>Dark Glance</option>
									<option value='dark_green'>Dark Green</option>
									<option value='dark_hotpink'>Dark Hotpink</option>
								</select>
							</div>
						</div>
                        
						<div class="clearboth"></div>
                        
                        <div id="categories-3" class="widget widget_categories">
                            <h4 class="widgettitle"><span>Categories</span></h4>
                            <ul>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/development/" title="Development">Development</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/reviews/" title="Reviews">Reviews</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/development/" title="Development">Development</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/mac/" title="Mac">Mac</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/raves/" title="Raves">Raves</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/reviews/" title="Reviews">Reviews</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/software/" title="Software">Software</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/rants/" title="Rants">Rants</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/uncategorized/" title="Uncategorized">Uncategorized</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/entertainment/" title="Entertainment">Entertainment</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/local/" title="Local">Local</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/news/" title="News">News</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/work/" title="Work">Work</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/internet/" title="Internet">Internet</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/jokes/" title="Jokes">Jokes</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/tutorials/" title="Tutorials">Tutorials</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/websites/" title="Websites">Websites</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/tv/" title="Tv">Tv</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/ppp/" title="Ppp">Ppp</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/javascript/" title="Javascript">Javascript</a>
                                </li>
                                
                        	    <li class="cat-item cat-item-4">
                                    <a href="/category/useful/" title="Useful">Useful</a>
                                </li>
                                
                      		</ul>
                        </div>
                        
                        <div class="clearboth"></div>
                        
                        <div id="recent-posts-3" class="widget widget_recent_entries">
                            <h4 class="widgettitle"><span>Recent Posts</span></h4>
                            <ul>
                                <li><a href="http://www.josephcrawford.com/2012/12/test/" title="Test">Test</a></li>
                                <li><a href="http://www.josephcrawford.com/2012/12/php-master-series/" title="PHP Master Series">PHP Master Series</a></li>
                                <li><a href="http://www.josephcrawford.com/2012/11/a-new-look/" title="A New Look">A New Look</a></li>
                                <li><a href="http://www.josephcrawford.com/2012/10/review-timing/" title="Review: Timing">Review: Timing</a></li>
                                <li><a href="http://www.josephcrawford.com/2012/10/review-markdown-pro/" title="Review: Markdown Pro">Review: Markdown Pro</a></li>
                            </ul>
                        </div>
                        <div id="top-posts-2" class="widget widget_top-posts"><h4 class="widgettitle"><span>Top Posts &amp; Pages</span></h4><ul class='widgets-list-layout no-grav'>
                            <li>
                                <img src="http://1.gravatar.com/avatar/bf6bc93ab3eeef8996970fa8ac9895a3?s=40&#038;d=http%3A%2F%2Fs1.wp.com%2Fi%2Flogo%2Fwhite-gray-80.png%3Fs%3D40&#038;r=PG" class='widgets-list-layout-blavatar' />
                                <div class="widgets-list-layout-links"><a href="http://www.josephcrawford.com/php-articles/going-deep-inside-php-sessions/" class="bump-view" data-bump-view="tp">Going deep inside PHP sessions</a></div>
                            </li>
                            <li>
                                <img src="http://1.gravatar.com/avatar/bf6bc93ab3eeef8996970fa8ac9895a3?s=40&#038;d=http%3A%2F%2Fs1.wp.com%2Fi%2Flogo%2Fwhite-gray-80.png%3Fs%3D40&#038;r=PG" class='widgets-list-layout-blavatar' />
                                <div class="widgets-list-layout-links"><a href="http://www.josephcrawford.com/2012/12/php-master-series/" class="bump-view" data-bump-view="tp">PHP Master Series</a></div>
                            </li>
                            <li>
                                <img src="http://i0.wp.com/www.josephcrawford.com/wp-content/uploads/2008/04/tagchimp.png?resize=40%2C40" class='widgets-list-layout-blavatar' />
                                <div class="widgets-list-layout-links"><a href="http://www.josephcrawford.com/2008/05/metax-and-tagchimp/" class="bump-view" data-bump-view="tp">MetaX and tagChimp</a></div>
                            </li>
                            <li>
                                <img src="http://i1.wp.com/www.josephcrawford.com/wp-content/uploads/2009/05/ffusa-featured.png?resize=40%2C40" class='widgets-list-layout-blavatar' />
                                <div class="widgets-list-layout-links"><a href="http://www.josephcrawford.com/2009/05/first-financial-usa-ffusa/" class="bump-view" data-bump-view="tp">First Financial USA (FFUSA)</a></div>
                            </li>
                            <li>
                                <img src="http://i0.wp.com/www.josephcrawford.com/wp-content/uploads/2009/08/WebOS.png?resize=40%2C40" class='widgets-list-layout-blavatar' />
                                <div class="widgets-list-layout-links"><a href="http://www.josephcrawford.com/2009/08/a-basic-webos-application-and-the-depot/" class="bump-view" data-bump-view="tp">A Basic WebOS Application and the Depot</a></div>
                            </li>
                            <li>
                                <img src="http://i0.wp.com/www.josephcrawford.com/wp-content/uploads/2006/11/photo_isight.jpeg?resize=40%2C40" class='widgets-list-layout-blavatar' />
                                <div class="widgets-list-layout-links"><a href="http://www.josephcrawford.com/2006/11/scary-isight-trick/" class="bump-view" data-bump-view="tp">Scary iSight Trick</a></div>
                            </li>
                            <li>
                                <img src="http://1.gravatar.com/avatar/bf6bc93ab3eeef8996970fa8ac9895a3?s=40&#038;d=http%3A%2F%2Fs1.wp.com%2Fi%2Flogo%2Fwhite-gray-80.png%3Fs%3D40&#038;r=PG" class='widgets-list-layout-blavatar' />
                                <div class="widgets-list-layout-links"><a href="http://www.josephcrawford.com/2010/09/bose-companion-5-and-ubuntu/" class="bump-view" data-bump-view="tp">Bose Companion 5 and Ubuntu (SOLVED)</a></div>
                            </li>
                            <li>
                                <img src="http://1.gravatar.com/avatar/bf6bc93ab3eeef8996970fa8ac9895a3?s=40&#038;d=http%3A%2F%2Fs1.wp.com%2Fi%2Flogo%2Fwhite-gray-80.png%3Fs%3D40&#038;r=PG" class='widgets-list-layout-blavatar' />
                                <div class="widgets-list-layout-links"><a href="http://www.josephcrawford.com/about/" class="bump-view" data-bump-view="tp">About</a></div>
                            </li>
                            <li>
                                <img src="http://1.gravatar.com/avatar/bf6bc93ab3eeef8996970fa8ac9895a3?s=40&#038;d=http%3A%2F%2Fs1.wp.com%2Fi%2Flogo%2Fwhite-gray-80.png%3Fs%3D40&#038;r=PG" class='widgets-list-layout-blavatar' />
                                <div class="widgets-list-layout-links"><a href="http://www.josephcrawford.com/macdev-articles/using-foundations-nslog-function/" class="bump-view" data-bump-view="tp">Using Foundation&#039;s NSLog Function</a></div>
                            </li>
                        </ul>
                    </div>
                    <div id="popularwidget-2" class="widget miss_popular_widget">
                        <h4 class="widgettitle">
                            <span>Popular Posts</span>
                        </h4>
                        <ul class="post_list small_post_list">
                            <li class="post_list_module">
                                <div class="post_list_image">
                                    <a href="http://www.josephcrawford.com/2007/11/phpwomen-a-site-for-women-programming-php/" title="PHPWomen: A site for women programming PHP">
                                        <img class="hover_fade_js" src="http://www.josephcrawford.com/wp-content/themes/radiostation/cache/php_women_2010_large_calendar-p158038689179469171b7aic_400-119x72.jpeg" title="PHPWomen: A site for women programming PHP" alt="Php Women 2010 Large Calendar P158038689179469171b7aic 400" width="119" height="72" />
                                    </a>
                                </div>
                                <div class="post_list_content">
                                    <p class="post_title">
                                        <a rel="bookmark" href="http://www.josephcrawford.com/2007/11/phpwomen-a-site-for-women-programming-php/" title="PHPWomen: A site for women programming PHP">PHPWomen: A site for women programming PHP</a>
                                    </p>
                                </div>
                            </li>
                            <li class="post_list_module">
                                <div class="post_list_image">
                                    <a href="http://www.josephcrawford.com/2009/03/the-new-itunes-hdcp-content/" title="The New iTunes HDCP Content">
                                        <img class="hover_fade_js" src="http://www.josephcrawford.com/wp-content/themes/radiostation/cache/hdcp-featured-119x72.png" title="The New iTunes HDCP Content" alt="Hdcp Featured" width="119" height="72" />
                                    </a>
                                </div>
                                <div class="post_list_content">
                                    <p class="post_title">
                                        <a rel="bookmark" href="http://www.josephcrawford.com/2009/03/the-new-itunes-hdcp-content/" title="The New iTunes HDCP Content">The New iTunes HDCP Content</a>
                                    </p>
                                </div>
                            </li>
                            <li class="post_list_module">
                                <div class="post_list_image">
                                    <a href="http://www.josephcrawford.com/2007/10/customizing-the-leopard-dock/" title="Customizing the Leopard Dock">
                                        <img class="hover_fade_js" src="http://www.josephcrawford.com/wp-content/themes/radiostation/cache/dock-featured-119x72.png" title="Customizing the Leopard Dock" alt="Dock Featured" width="119" height="72" />
                                    </a>
                                </div>
                                <div class="post_list_content">
                                    <p class="post_title">
                                        <a rel="bookmark" href="http://www.josephcrawford.com/2007/10/customizing-the-leopard-dock/" title="Customizing the Leopard Dock">Customizing the Leopard Dock</a>
                                    </p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div id="popularwidget-2" class="widget">
                        <h4 class="widgettitle">
                            <span>Tag Cloud</span>
                        </h4>
                        <span style='font-size: 75%'><a href='/tags/php/'>php</a></span>
<span style='font-size: 75%'><a href='/tags/server-side/'>server-side</a></span>
<span style='font-size: 75%'><a href='/tags/best-practices/'>best-practices</a></span>
<span style='font-size: 75%'><a href='/tags/ide/'>ide</a></span>
<span style='font-size: 75%'><a href='/tags/software/'>software</a></span>
<span style='font-size: 151%'><a href='/tags/development/'>Development</a></span>
<span style='font-size: 170%'><a href='/tags/mac/'>Mac</a></span>
<span style='font-size: 280%'><a href='/tags/raves/'>Raves</a></span>
<span style='font-size: 249%'><a href='/tags/reviews/'>Reviews</a></span>
<span style='font-size: 108%'><a href='/tags/software/'>Software</a></span>
<span style='font-size: 180%'><a href='/tags/rants/'>Rants</a></span>
<span style='font-size: 75%'><a href='/tags/uncategorized/'>Uncategorized</a></span>
<span style='font-size: 280%'><a href='/tags/entertainment/'>Entertainment</a></span>
<span style='font-size: 129%'><a href='/tags/local/'>Local</a></span>
<span style='font-size: 280%'><a href='/tags/news/'>News</a></span>
<span style='font-size: 75%'><a href='/tags/work/'>Work</a></span>
<span style='font-size: 280%'><a href='/tags/internet/'>Internet</a></span>
<span style='font-size: 75%'><a href='/tags/jokes/'>Jokes</a></span>
<span style='font-size: 86%'><a href='/tags/tutorials/'>Tutorials</a></span>
<span style='font-size: 196%'><a href='/tags/websites/'>Websites</a></span>
<span style='font-size: 75%'><a href='/tags/tv/'>TV</a></span>
<span style='font-size: 75%'><a href='/tags/ppp/'>PPP</a></span>
<span style='font-size: 75%'><a href='/tags/javascript/'>JavaScript</a></span>
<span style='font-size: 75%'><a href='/tags/php/'>PHP</a></span>
<span style='font-size: 103%'><a href='/tags/useful/'>Useful</a></span>
<span style='font-size: 75%'><a href='/tags/frameworks/'>Frameworks</a></span>
<span style='font-size: 75%'><a href='/tags/family/'>Family</a></span>
<span style='font-size: 75%'><a href='/tags/tmc/'>TMC</a></span>
<span style='font-size: 75%'><a href='/tags/macdev/'>MacDev</a></span>
<span style='font-size: 75%'><a href='/tags/scams/'>Scams</a></span>
<span style='font-size: 75%'><a href='/tags/palm/'>Palm</a></span>
<span style='font-size: 75%'><a href='/tags/css/'>CSS</a></span>
<span style='font-size: 75%'><a href='/tags/political/'>Political</a></span>
<span style='font-size: 75%'><a href='/tags/recruiters/'>Recruiters</a></span>

                        <!-- tagcloud goes here -->
                    </div>
                </div><!-- #sidebar_inner -->
            </div><!-- #sidebar -->
                    
                <div class="clearboth"></div>
            </div><!-- #content_inner -->
        </div><!-- #content -->
    </div> <!-- .container -->
    
    <div id="footer">
        <div class="background">
            <div class="background"></div>
        </div>
        <div class="container">
            <div class="sixteen columns">
                <div class="one_fourth"><div id="cr_plmanager_widget-2" class="widget widget_cr_plmanager_widget"><h4 class="widgettitle"><span>Sponsors</span></h4><div class="textwidget"><a href='http://www.shimonsandler.com/'>SEO Consulting</a></div></div></div><div class="three_fourth last"></div><div class="clearboth"></div>          </div>
        </div>
    </div><!-- #footer -->
<div id="sub_footer"><div class="container"><div class="sixteen columns"><div class="copyright_text">Copyright &copy; "Joseph Crawford" 2012. All rights reserved. </div></div><!-- columns --></div><!-- container --></div><!-- #sub_footer --></div><!-- #page_inner -->
<img src="http://www.josephcrawford.com/wp-content/plugins/welamazonadds/images/empty.png?n=0187a1f2eb&priceIndicator=&backgroundColor=%23F4F4F4&borderColor=%23000000&textColor=%23000000&linkColor=%230000FF&target=_blank&imageSize=IS2" src="" width="0" height="0" id="WAA_interim" /> <div style="display:none">
    <div class="grofile-hash-map-bf6bc93ab3eeef8996970fa8ac9895a3">
    </div>
    </div>
<script type='text/javascript' src='http://www.josephcrawford.com/wp-content/themes/radiostation/framework/scripts/prettyphoto/js/jquery.prettyPhoto.js?ver=1.0.8'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201251'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2012Decaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.josephcrawford.com/wp-content/plugins/jetpack/modules/wpgroho.js?ver=3.5'></script>

    <script src="http://stats.wordpress.com/e-201251.js" type="text/javascript"></script>
    <script type="text/javascript">
    st_go({v:'ext',j:'1:2.0.4',blog:'6829527',post:'0',tz:'0'});
    var load_cmc = function(){linktracker_init(6829527,0,2);};
    if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
    else load_cmc();
    </script>
<style type='text/css'>img#wpstats{display:none}</style><script type="text/javascript">/* <![CDATA[ */jQuery( '.blog_layout1' ).preloader({ imgSelector: '.blog_index_image_load span img', imgAppend: '.blog_index_image_load' });jQuery( '.blog_layout2' ).preloader({ imgSelector: '.blog_index_image_load span img', imgAppend: '.blog_index_image_load' });jQuery( '.blog_layout3' ).preloader({ imgSelector: '.blog_index_image_load span img', imgAppend: '.blog_index_image_load' });jQuery( '.single_post_module' ).preloader({ imgSelector: '.blog_index_image_load span img', imgAppend: '.blog_index_image_load' });jQuery( '.one_column_portfolio' ).preloader({ imgSelector: '.portfolio_img_load span img', imgAppend: '.portfolio_img_load' });jQuery( '.two_column_portfolio' ).preloader({ imgSelector: '.portfolio_img_load span img', imgAppend: '.portfolio_img_load' });jQuery( '.three_column_portfolio' ).preloader({ imgSelector: '.portfolio_img_load span img', imgAppend: '.portfolio_img_load' });jQuery( '.four_column_portfolio' ).preloader({ imgSelector: '.portfolio_img_load span img', imgAppend: '.portfolio_img_load' });jQuery( '.portfolio_gallery.large_post_list' ).preloader({ imgSelector: '.portfolio_img_load span img', imgAppend: '.portfolio_img_load' });jQuery( '.portfolio_gallery.medium_post_list' ).preloader({ imgSelector: '.portfolio_img_load span img', imgAppend: '.portfolio_img_load' });jQuery( '.portfolio_gallery.small_post_list' ).preloader({ imgSelector: '.portfolio_img_load span img', imgAppend: '.portfolio_img_load' });jQuery( '#main_inner' ).preloader({ imgSelector: '.portfolio_full_image span img', imgAppend: '.portfolio_full_image' });jQuery( '#main_inner' ).preloader({ imgSelector: '.blog_sc_image_load span img', imgAppend: '.blog_sc_image_load' });jQuery( '#main_inner' ).preloader({ imgSelector: '.styled_image_load span img', imgAppend: '.styled_image_load' });jQuery( '#intro_inner' ).preloader({ imgSelector: '.styled_image_load span img', imgAppend: '.styled_image_load' });/* ]]> */</script><!--[if lt IE 10]><script type="text/javascript">jQuery(".flex-imageLink img").animate({"height":"386px"},500);</script><![endif]--> </body>
</html>